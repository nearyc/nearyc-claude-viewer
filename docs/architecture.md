# Claude Viewer - äº§å“çº§æ•´åˆæ–¹æ¡ˆ

## äº§å“å®šä½

**Claude Viewer** = Sessions å†å²æŸ¥çœ‹å™¨ + Agent Teams ç›‘æ§å™¨ + æ•°æ®å¯è§†åŒ–åˆ†æå¹³å°

ä¸æ˜¯ç®€å•çš„åŠŸèƒ½å †ç Œï¼Œè€Œæ˜¯å»ºç«‹ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„æœ‰æœºè”ç³»ï¼Œæä¾›å®Œæ•´çš„ Claude ä½¿ç”¨æ´å¯Ÿå’Œé«˜æ•ˆçš„æ“ä½œä½“éªŒã€‚

---

## ç”¨æˆ·æ•…äº‹ä¸åœºæ™¯

### åœºæ™¯ 1: å¤ç›˜ä¸€æ¬¡ Agent Team åä½œ
> "æ˜¨å¤©æˆ‘ç”¨ swarming æ¨¡å¼è®© 3 ä¸ª agent å®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½ï¼Œä»Šå¤©æƒ³å¤ç›˜æ•´ä¸ªè¿‡ç¨‹"

**ç”¨æˆ·è·¯å¾„**:
1. è¿›å…¥ Dashboardï¼ŒæŸ¥çœ‹å®æ—¶æ´»åŠ¨æ—¶é—´çº¿
2. æ‰¾åˆ°æ˜¨å¤©çš„ Session æ´»åŠ¨è®°å½•
3. ç‚¹å‡»æ‰“å¼€ï¼Œå‘ç°è¯¥ Session å…³è”äº† "feature-dev-team"
4. ç‚¹å‡»è·³è½¬ï¼ŒæŸ¥çœ‹ Team ä¸­æ¯ä¸ªæˆå‘˜çš„æ¶ˆæ¯å’ŒçŠ¶æ€å˜åŒ–
5. ä½¿ç”¨ Cmd+K å¿«é€Ÿåˆ‡æ¢åˆ°å…¶ä»–è§†å›¾

### åœºæ™¯ 2: ç›‘æ§æ­£åœ¨è¿è¡Œçš„ Team
> "æˆ‘å¯åŠ¨äº†ä¸€ä¸ª Agent Team åœ¨å¤„ç†ä»»åŠ¡ï¼Œæƒ³çŸ¥é“ç°åœ¨è¿›å±•å¦‚ä½•"

**ç”¨æˆ·è·¯å¾„**:
1. è¿›å…¥ Agent Teams è§†å›¾
2. æŸ¥çœ‹å®æ—¶æ¶ˆæ¯æµ
3. ç‚¹å‡» "æŸ¥çœ‹ç›¸å…³ Session" è·³è½¬åˆ°å®Œæ•´çš„å¯¹è¯ä¸Šä¸‹æ–‡
4. å¯¼å‡ºé‡è¦ Session ä¸º Markdown ä¿å­˜

### åœºæ™¯ 3: åˆ†æä½¿ç”¨ä¹ æƒ¯å’Œäº§å‡º
> "æˆ‘æƒ³çŸ¥é“è¿™å‘¨çš„ä»£ç äº§å‡ºå’Œä¼šè¯æ´»è·ƒåº¦"

**ç”¨æˆ·è·¯å¾„**:
1. è¿›å…¥ Dashboard è§†å›¾
2. æŸ¥çœ‹ä¼šè¯æ´»è·ƒåº¦çƒ­åŠ›å›¾ï¼Œäº†è§£æ¯å¤©çš„æ´»è·ƒç¨‹åº¦
3. æŸ¥çœ‹è¶‹åŠ¿å›¾ï¼Œåˆ†æä¼šè¯æ•°é‡å˜åŒ–
4. æŸ¥çœ‹ä»£ç äº§å‡ºç»Ÿè®¡ï¼Œäº†è§£å„è¯­è¨€ä»£ç è¡Œæ•°

### åœºæ™¯ 4: é€šè¿‡æ·±åº¦é“¾æ¥åˆ†äº« Session
> "è¿™ä¸ª Session å¾ˆé‡è¦ï¼Œæˆ‘æƒ³åˆ†äº«ç»™åŒäº‹"

**ç”¨æˆ·è·¯å¾„**:
1. åœ¨ Sessions è§†å›¾ä¸­æ‰¾åˆ° Session
2. å¤åˆ¶æµè§ˆå™¨åœ°å€æ çš„ URLï¼ˆå¦‚ `/#/sessions/abc123`ï¼‰
3. åˆ†äº«ç»™åŒäº‹
4. åŒäº‹æ‰“å¼€é“¾æ¥ç›´æ¥è·³è½¬åˆ°è¯¥ Session

### åœºæ™¯ 5: ä½¿ç”¨å‘½ä»¤é¢æ¿å¿«é€Ÿå¯¼èˆª
> "æˆ‘æƒ³å¿«é€Ÿè·³è½¬åˆ°æŸä¸ª Session"

**ç”¨æˆ·è·¯å¾„**:
1. æŒ‰ Cmd+K æ‰“å¼€å‘½ä»¤é¢æ¿
2. è¾“å…¥ "Search Sessions"
3. è¾“å…¥å…³é”®è¯æœç´¢
4. é€‰æ‹©ç»“æœç›´æ¥è·³è½¬

### åœºæ™¯ 6: æ‰¹é‡å¯¼å‡º Sessions
> "æˆ‘éœ€è¦å¯¼å‡ºæœ¬å‘¨çš„æ‰€æœ‰ Sessions åšå¤‡ä»½"

**ç”¨æˆ·è·¯å¾„**:
1. è¿›å…¥ Sessions è§†å›¾
2. ä½¿ç”¨æ™ºèƒ½ç­›é€‰é€‰æ‹©æœ¬å‘¨çš„ Sessions
3. æ‰¹é‡é€‰æ‹©å¤šä¸ª Session
4. ç‚¹å‡»æ‰¹é‡å¯¼å‡ºï¼Œé€‰æ‹©æ ¼å¼

---

## äº§å“æ¶æ„

### ä¸»å¯¼èˆªç»“æ„ (Sidebar)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– Claude Viewer       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚  ğŸ“Š Dashboard           â”‚
â”‚  ğŸ’¬ Sessions        (86)â”‚
â”‚  ğŸ“ Projects        (12)â”‚
â”‚  ğŸ‘¥ Agent Teams     (5) â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âŒ˜ Cmd+K å‘½ä»¤é¢æ¿       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš¡ Connected            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè§†å›¾

| è§†å›¾ | åŠŸèƒ½ | å¸ƒå±€ | ç‰¹è‰²åŠŸèƒ½ |
|------|------|------|----------|
| **Dashboard** | å…¨å±€æ¦‚è§ˆ + æ•°æ®å¯è§†åŒ– | ä»ªè¡¨ç›˜ | çƒ­åŠ›å›¾ã€è¶‹åŠ¿å›¾ã€æ—¶é—´çº¿ |
| **Sessions** | ä¼šè¯åˆ—è¡¨ + è¯¦æƒ… | ä¸‰æ å¼ | æ‰¹é‡æ“ä½œã€æ ‡ç­¾ã€å¯¼å‡º |
| **Projects** | é¡¹ç›®ç­›é€‰è§†å›¾ | ä¸‰æ å¼ | é¡¹ç›®ç»Ÿè®¡ |
| **Agent Teams** | Team åˆ—è¡¨ + æˆå‘˜ + æ¶ˆæ¯ | ä¸‰æ å¼ | å®æ—¶æ¶ˆæ¯ã€çŠ¶æ€ç›‘æ§ |

### å…³é”®äº¤äº’è®¾è®¡

#### 1. å…¨å±€å‘½ä»¤é¢æ¿ (Cmd+K)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ˜ Search commands...                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Navigation                            â”‚
â”‚  â†’ Go to Dashboard           âŒ˜D        â”‚
â”‚  â†’ Go to Sessions            âŒ˜S        â”‚
â”‚  â†’ Go to Teams               âŒ˜T        â”‚
â”‚                                        â”‚
â”‚  Actions                               â”‚
â”‚  â†’ Export Current Session              â”‚
â”‚  â†’ Refresh Data                        â”‚
â”‚  â†’ Toggle Theme                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. Dashboard æ•°æ®å¯è§†åŒ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Dashboard                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚Sessionsâ”‚ â”‚Projectsâ”‚ â”‚ Teams  â”‚       â”‚
â”‚ â”‚   86   â”‚ â”‚   12   â”‚ â”‚   5    â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Activity       â”‚ â”‚ Session Trend  â”‚   â”‚
â”‚ â”‚ Heatmap        â”‚ â”‚ (14 days)      â”‚   â”‚
â”‚ â”‚ [â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–‘]   â”‚ â”‚ /\/\/\         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ ğŸ“ˆ Real-time Activity Timeline          â”‚
â”‚ â€¢ Today                                â”‚
â”‚   [ğŸ’¬] Session: ä¿®æ”¹PPT...    2h ago   â”‚
â”‚   [ğŸ‘¥] Team: feature-dev-team 3h ago   â”‚
â”‚ â€¢ Yesterday                            â”‚
â”‚   [ğŸ’¬] Session: ä¼˜åŒ–ä»£ç ...    1d ago   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. Session â†’ Team è·³è½¬
åœ¨ SessionDetail ä¸­æ·»åŠ å…³è” Team ä¿¡æ¯ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session: 3df0892e...              [ğŸ”—] â”‚
â”‚ Project: vscodeTest                    â”‚
â”‚ Time: 2 hours ago                      â”‚
â”‚ Tags: [feature] [bugfix]               â”‚
â”‚                                        â”‚
â”‚ ğŸ‘¥ å…³è” Team: feature-dev-team    [æŸ¥çœ‹] â”‚
â”‚                                        â”‚
â”‚ [å¯¼å‡º] [åœ¨ Claude Code ä¸­æ‰“å¼€] [â˜…æ”¶è—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ¶ˆæ¯åˆ—è¡¨...                             â”‚
```

#### 4. æ‰¹é‡æ“ä½œæ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœ“] å·²é€‰æ‹© 5 ä¸ª Session                 â”‚
â”‚ [å…¨é€‰] [å–æ¶ˆ] [æ‰¹é‡åˆ é™¤] [æ‰¹é‡å¯¼å‡º]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Dashboard  â”‚ â”‚  Sessions   â”‚ â”‚    Agent Teams      â”‚   â”‚
â”‚  â”‚  - Heatmap  â”‚ â”‚  - List     â”‚ â”‚    - List           â”‚   â”‚
â”‚  â”‚  - Trend    â”‚ â”‚  - Detail   â”‚ â”‚    - Members        â”‚   â”‚
â”‚  â”‚  - Timeline â”‚ â”‚  - Export   â”‚ â”‚    - Messages       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚CommandPaletteâ”‚ â”‚ useUrlState â”‚ â”‚   useSessionTags    â”‚   â”‚
â”‚  â”‚  (Cmd+K)    â”‚ â”‚ (Deep Link) â”‚ â”‚   (Tag System)      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ WebSocket / HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Routes    â”‚ â”‚  Services   â”‚ â”‚   FileWatcher       â”‚   â”‚
â”‚  â”‚  - sessions â”‚ â”‚  - sessions â”‚ â”‚   (Real-time)       â”‚   â”‚
â”‚  â”‚  - teams    â”‚ â”‚  - teams    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚  - stats    â”‚ â”‚  - stats    â”‚                           â”‚
â”‚  â”‚  - search   â”‚ â”‚  - search   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  - code     â”‚ â”‚   ~/.claude/        â”‚   â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   - history.jsonl   â”‚   â”‚
â”‚                                  â”‚   - teams/          â”‚   â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  â”‚ Socket.io   â”‚                           â”‚
â”‚                  â”‚ (Events)    â”‚                           â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®å…³è”è®¾è®¡

**Session å’Œ Team å…³è”**:
- é€šè¿‡æ—¶é—´èŒƒå›´å’Œé¡¹ç›®è·¯å¾„è‡ªåŠ¨å…³è”
- Session Detail ä¸­æ˜¾ç¤ºå¯èƒ½ç›¸å…³çš„ Team
- Team æ¶ˆæ¯ä¸­å¯è·³è½¬åˆ°å…³è” Session

**æ•°æ®æµåˆ†å±‚**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (React + TypeScript)        â”‚
â”‚  - State Management: React Hooks      â”‚
â”‚  - UI: Tailwind CSS                   â”‚
â”‚  - Icons: Lucide React                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Layer (Express)                  â”‚
â”‚  - REST API                           â”‚
â”‚  - WebSocket Events                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Service Layer                        â”‚
â”‚  - Business Logic                     â”‚
â”‚  - Data Transformation                â”‚
â”‚  - Caching                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Source                          â”‚
â”‚  - File System (JSONL/JSON)           â”‚
â”‚  - FileWatcher (chokidar)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åç«¯æ¶æ„

```
claude-viewer/backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ server.ts             # Express + Socket.io é…ç½®
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts          # ç»Ÿä¸€ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ sessions.ts       # /api/sessions/*
â”‚   â”‚   â”œâ”€â”€ teams.ts          # /api/teams/*
â”‚   â”‚   â”œâ”€â”€ projects.ts       # /api/projects/*
â”‚   â”‚   â”œâ”€â”€ stats.ts          # /api/stats/* (æ´»åŠ¨ã€è¶‹åŠ¿ã€ä»£ç ç»Ÿè®¡)
â”‚   â”‚   â”œâ”€â”€ search.ts         # /api/search (å…¨æ–‡æœç´¢)
â”‚   â”‚   â””â”€â”€ execute.ts        # /api/execute (shell å‘½ä»¤)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ sessions/             # Sessions æ¨¡å—åŒ–æœåŠ¡ (é‡æ„å)
â”‚   â”‚   â”‚   â”œâ”€â”€ PathUtils.ts          # è·¯å¾„å¤„ç†å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionCache.ts       # ç¼“å­˜ç®¡ç† (get/set/clear/stats)
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionLoader.ts      # ä» history.jsonl åŠ è½½ä¼šè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectScanner.ts     # æ‰«æé¡¹ç›®ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ ConversationLoader.ts # åŠ è½½å®Œæ•´å¯¹è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionRepository.ts  # ä¼šè¯ CRUD æ“ä½œ
â”‚   â”‚   â”‚   â””â”€â”€ __tests__/            # å•å…ƒæµ‹è¯• (70+)
â”‚   â”‚   â”œâ”€â”€ sessionsService.ts    # ç²¾ç®€åçš„ä¸»æœåŠ¡ï¼ˆç»„åˆæ¨¡å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ teamsService.ts
â”‚   â”‚   â”œâ”€â”€ statsService.ts       # ç»Ÿè®¡æ•°æ®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ searchService.ts      # å…¨æ–‡æœç´¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ codeStatsService.ts   # ä»£ç äº§å‡ºç»Ÿè®¡
â”‚   â”‚   â””â”€â”€ activityService.ts    # å®æ—¶æ´»åŠ¨æµ
â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ apiResponse.ts        # ç»Ÿä¸€ API å“åº”æ ¼å¼
â”‚       â”œâ”€â”€ pathUtils.ts          # è·¯å¾„å¤„ç†
â”‚       â””â”€â”€ dateUtils.ts          # æ—¥æœŸå¤„ç†
```

**ç»Ÿä¸€ FileWatcher**
ç›‘æ§ä¸‰ä¸ªæ•°æ®æºï¼š
- `~/.claude/history.jsonl` (Sessions)
- `~/.claude/projects/**/*.jsonl` (Session details)
- `~/.claude/teams/**/*.json` (Teams)

**æ—¶é—´æˆ³æ ¼å¼å¤„ç†**

Claude Code çš„ history.jsonl ä½¿ç”¨ Unix æ—¶é—´æˆ³ï¼ˆç§’çº§ï¼Œ10ä½æ•°å­—ï¼‰ï¼Œè€Œ JavaScript ä½¿ç”¨æ¯«ç§’çº§æ—¶é—´æˆ³ï¼ˆ13ä½æ•°å­—ï¼‰ã€‚åç«¯è‡ªåŠ¨è¿›è¡Œè½¬æ¢ï¼š

```typescript
// sessionsService.ts
const timestampMs = entry.timestamp > 10000000000
  ? entry.timestamp  // å·²ç»æ˜¯æ¯«ç§’çº§
  : entry.timestamp * 1000;  // ç§’çº§è½¬æ¯«ç§’çº§
```

è¿™æ ·å¯ä»¥ç¡®ä¿å‰ç«¯æ˜¾ç¤ºçš„ç›¸å¯¹æ—¶é—´ï¼ˆå¦‚ "2h ago"ï¼‰æ˜¯æ­£ç¡®çš„ã€‚

**Stats API è®¾è®¡**
```
GET /api/stats/activity?days=90     # æ´»åŠ¨çƒ­åŠ›å›¾æ•°æ®
GET /api/stats/projects/:path/trends # é¡¹ç›®è¶‹åŠ¿
GET /api/stats/usage                # ä½¿ç”¨ç»Ÿè®¡æ‘˜è¦
GET /api/stats/code-output          # ä»£ç äº§å‡ºç»Ÿè®¡
```

**Search API è®¾è®¡**
```
GET /api/search?q=keyword&type=session&limit=20
```

**WebSocket äº‹ä»¶æ‰©å±•**
```
# åŸæœ‰äº‹ä»¶
sessions:initial, sessions:updated
session:data, session:updated
teams:initial, teams:updated
team:data, team:messages

# æ–°å¢äº‹ä»¶
stats:updated          # ç»Ÿè®¡æ•°æ®æ›´æ–°
activity:stream        # å®æ—¶æ´»åŠ¨æµ
```

### å‰ç«¯æ¶æ„

```
claude-viewer/frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨ï¼Œè·¯ç”±æ§åˆ¶
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ contexts/               # React Contexts
â”‚   â”‚   â”œâ”€â”€ SessionNamesContext.tsx
â”‚   â”‚   â””â”€â”€ TeamNamesContext.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts     # ç»Ÿä¸€ WebSocket
â”‚   â”‚   â”œâ”€â”€ useSessions.ts
â”‚   â”‚   â”œâ”€â”€ useTeams.ts
â”‚   â”‚   â”œâ”€â”€ useSessionNames.ts  # Session è‡ªå®šä¹‰åç§°
â”‚   â”‚   â”œâ”€â”€ useTeamNames.ts     # Team è‡ªå®šä¹‰åç§°
â”‚   â”‚   â”œâ”€â”€ useSessionTags.ts   # Session æ ‡ç­¾ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ useUrlState.ts      # URL hash çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useCommandPalette.ts # å‘½ä»¤é¢æ¿çŠ¶æ€
â”‚   â”‚   â””â”€â”€ useSavedFilters.ts  # ä¿å­˜çš„ç­›é€‰æ¡ä»¶
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ Layout.tsx          # å¯è°ƒæ•´å¸ƒå±€
â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚       â”œâ”€â”€ Dashboard.tsx       # ä»ªè¡¨ç›˜
â”‚       â”‚   â”œâ”€â”€ ActivityHeatmap.tsx    # æ´»åŠ¨çƒ­åŠ›å›¾
â”‚       â”‚   â”œâ”€â”€ TrendChart.tsx         # è¶‹åŠ¿å›¾
â”‚       â”‚   â””â”€â”€ ActivityTimeline.tsx   # æ´»åŠ¨æ—¶é—´çº¿
â”‚       â”œâ”€â”€ CommandPalette.tsx  # å…¨å±€å‘½ä»¤é¢æ¿
â”‚       â”œâ”€â”€ sessions/
â”‚       â”‚   â”œâ”€â”€ SessionList.tsx      # æ‰¹é‡æ“ä½œã€æ™ºèƒ½ç­›é€‰
â”‚       â”‚   â”œâ”€â”€ SessionDetail/       # æ¨¡å—åŒ–é‡æ„å (1130è¡Œ â†’ 180è¡Œ)
â”‚       â”‚   â”‚   â”œâ”€â”€ components/      # å­ç»„ä»¶
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SessionHeader.tsx    # æ ‡é¢˜ã€é¡¹ç›®åã€è¿”å›æŒ‰é’®
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SessionMeta.tsx      # Session IDã€æ—¶é—´ç»Ÿè®¡
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SessionActions.tsx   # å¯¼å‡ºã€åˆ é™¤ã€æ ‡ç­¾æ“ä½œ
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ NavigationBar.tsx    # æ»šåŠ¨å¯¼èˆªæŒ‰é’®ç»„
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx        # æœç´¢è¾“å…¥å’Œè¿‡æ»¤
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ BookmarksList.tsx    # ä¹¦ç­¾åˆ—è¡¨
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ ConversationView.tsx # æ¶ˆæ¯åˆ—è¡¨æ¸²æŸ“
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ RawInputsView.tsx    # åŸå§‹è¾“å…¥æ˜¾ç¤º
â”‚       â”‚   â”‚   â”œâ”€â”€ hooks/           # è‡ªå®šä¹‰ Hooks
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ useBookmarks.ts      # ä¹¦ç­¾çŠ¶æ€ç®¡ç†
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ useSearch.ts         # æœç´¢åŠŸèƒ½
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ useScrollNavigation.ts # æ»šåŠ¨å¯¼èˆª
â”‚       â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ escapeRegExp.ts      # æ­£åˆ™è½¬ä¹‰
â”‚       â”‚   â”‚   â””â”€â”€ SessionDetail.tsx        # ç²¾ç®€ä¸»ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ ExportDialog.tsx     # å¯¼å‡ºå¯¹è¯æ¡†
â”‚       â”‚   â”œâ”€â”€ TagSelector.tsx      # æ ‡ç­¾é€‰æ‹©å™¨
â”‚       â”‚   â”œâ”€â”€ SmartFilterBar.tsx   # æ™ºèƒ½ç­›é€‰æ 
â”‚       â”‚   â””â”€â”€ BatchActionBar.tsx   # æ‰¹é‡æ“ä½œæ 
â”‚       â””â”€â”€ teams/
â”‚           â”œâ”€â”€ TeamList.tsx
â”‚           â”œâ”€â”€ MemberList.tsx
â”‚           â””â”€â”€ MessagePanel.tsx
```

#### URL State ç®¡ç† (æ·±åº¦é“¾æ¥)

```typescript
// useUrlState.ts
interface UrlState {
  view: 'dashboard' | 'sessions' | 'projects' | 'teams';
  sessionId?: string;
  teamId?: string;
  project?: string;
}

// URL æ ¼å¼:
// #/dashboard
// #/sessions
// #/sessions/:id
// #/teams/:id
```

#### Command Palette æ¶æ„

```typescript
interface Command {
  id: string;
  label: string;
  shortcut?: string;
  icon?: React.ReactNode;
  action: () => void;
  category: 'navigation' | 'action' | 'search';
}

// 31+ ä¸ªå†…ç½®å‘½ä»¤
// - å¯¼èˆª: Go to Dashboard/Sessions/Teams/Projects
// - æ“ä½œ: Export, Refresh, Toggle Theme
// - æœç´¢: Search Sessions, Search Teams
```

#### æ ‡ç­¾ç³»ç»Ÿæ¶æ„

```typescript
// useSessionTags.ts
interface SessionTags {
  [sessionId: string]: string[];
}

const STORAGE_KEY = 'claude-viewer-session-tags';
// ä½¿ç”¨ localStorage æŒä¹…åŒ–

// API:
// - getTags(sessionId): string[]
// - addTag(sessionId, tag): void
// - removeTag(sessionId, tag): void
// - getAllTags(): string[] (æ‰€æœ‰å”¯ä¸€æ ‡ç­¾)
```

#### å¯¼å‡ºåŠŸèƒ½æ¶æ„

```typescript
// æ”¯æŒæ ¼å¼
enum ExportFormat {
  MARKDOWN = 'md',
  JSON = 'json',
  HTML = 'html'
}

// Markdown æ ¼å¼
// # Session: {sessionId}
// - Project: {project}
// - Created: {createdAt}
//
// ## Messages
// ### User ({timestamp})
// {content}
// ### Assistant ({timestamp})
// {content}
```

#### å¯è§†åŒ–ç»„ä»¶æ¶æ„

**ActivityHeatmap (æ´»åŠ¨çƒ­åŠ›å›¾)**:
- 90 å¤©æ•°æ®
- 5 çº§æ´»è·ƒåº¦ (0-4)
- çº¯ CSS Grid å®ç°
- Tooltip æ˜¾ç¤ºæ—¥æœŸå’Œæ•°é‡

**TrendChart (è¶‹åŠ¿å›¾)**:
- 14 å¤©æ•°æ®
- SVG ç»˜åˆ¶
- æ¸å˜å¡«å……
- ç½‘æ ¼çº¿å’Œåæ ‡è½´

**ActivityTimeline (æ´»åŠ¨æ—¶é—´çº¿)**:
- æŒ‰æ—¶é—´åˆ†ç»„ (ä»Šå¤©/æ˜¨å¤©/æœ¬å‘¨/æ›´æ—©)
- Session (è“è‰²) + Team (ç´«è‰²)
- å®æ—¶æ›´æ–°

### æµ‹è¯•æ¶æ„

#### åç«¯æµ‹è¯• (Jest)

```
backend/
â”œâ”€â”€ jest.config.js              # Jest é…ç½®
â”œâ”€â”€ test/
â”‚   â””â”€â”€ setup.ts                # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â””â”€â”€ src/
    â”œâ”€â”€ utils/__tests__/        # å·¥å…·å‡½æ•°æµ‹è¯•
    â”‚   â””â”€â”€ pathUtils.test.ts
    â””â”€â”€ services/sessions/__tests__/  # Sessions æœåŠ¡æµ‹è¯•
        â”œâ”€â”€ PathUtils.test.ts
        â”œâ”€â”€ SessionCache.test.ts
        â”œâ”€â”€ SessionLoader.test.ts
        â”œâ”€â”€ ProjectScanner.test.ts
        â”œâ”€â”€ ConversationLoader.test.ts
        â””â”€â”€ SessionRepository.test.ts
```

**æµ‹è¯•ç­–ç•¥**:
- å•å…ƒæµ‹è¯•è¦†ç›–æ‰€æœ‰æœåŠ¡æ¨¡å—
- ä½¿ç”¨ `__tests__` ç›®å½•ç»„ç»‡æµ‹è¯•æ–‡ä»¶
- ç›®æ ‡è¦†ç›–ç‡: 80%+

#### å‰ç«¯æµ‹è¯• (Vitest)

```
frontend/
â”œâ”€â”€ vitest.config.ts            # Vitest é…ç½®
â”œâ”€â”€ test/
â”‚   â””â”€â”€ setup.ts                # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â””â”€â”€ src/
    â”œâ”€â”€ utils/__tests__/        # å·¥å…·å‡½æ•°æµ‹è¯•
    â”‚   â”œâ”€â”€ exportUtils.test.ts
    â”‚   â””â”€â”€ time.test.ts
    â””â”€â”€ components/SessionDetail/
        â”œâ”€â”€ components/__tests__/   # ç»„ä»¶æµ‹è¯•
        â”‚   â”œâ”€â”€ SessionHeader.test.tsx
        â”‚   â”œâ”€â”€ SessionMeta.test.tsx
        â”‚   â””â”€â”€ ...
        â””â”€â”€ hooks/__tests__/        # Hooks æµ‹è¯•
            â”œâ”€â”€ useBookmarks.test.ts
            â”œâ”€â”€ useSearch.test.ts
            â””â”€â”€ useScrollNavigation.test.ts
```

**æµ‹è¯•ç­–ç•¥**:
- ç»„ä»¶æµ‹è¯•ä½¿ç”¨ React Testing Library
- Hooks æµ‹è¯•ä½¿ç”¨ renderHook
- å·¥å…·å‡½æ•°ç‹¬ç«‹æµ‹è¯•

### ç»Ÿè®¡æ•°æ®æµ

```
~/.claude/history.jsonl
    â†“ (FileWatcher)
backend/src/services/statsService.ts
    â†“ (ç»Ÿè®¡åˆ†æ)
â”œâ”€ getActivityStats(days) â†’ ActivityData[]
â”‚   â””â”€ { date: string, count: number, level: 0-4 }
â”œâ”€ getProjectTrends(path, days) â†’ TrendData[]
â”‚   â””â”€ { label: string, count: number }
â”œâ”€ getUsageStats() â†’ UsageStats
â”‚   â””â”€ { totalSessions, totalProjects, ... }
â””â”€ getCodeStats(days) â†’ CodeStats
    â””â”€ { languages: { [lang]: lines }, totalLines }

    â†“ (HTTP / WebSocket)
frontend/src/components/
â”œâ”€ ActivityHeatmap.tsx
â”œâ”€ TrendChart.tsx
â””â”€ ActivityTimeline.tsx
```

### æœç´¢æ•°æ®æµ

```
~/.claude/history.jsonl
    â†“ (FileWatcher + Index)
backend/src/services/searchService.ts
    â†“ (å…¨æ–‡ç´¢å¼•)
GET /api/search?q=keyword
    â†“
frontend/src/components/SearchResults.tsx
```

---

## å®æ–½é˜¶æ®µè§„åˆ’

### é˜¶æ®µä¸€: åŸºç¡€è®¾æ–½å¢å¼º âœ“

**ä»»åŠ¡åˆ—è¡¨**:
1. **é¢åŒ…å±‘å¯¼èˆª+æ·±åº¦é“¾æ¥**
   - useUrlState.ts hook
   - URL hash è·¯ç”±ç®¡ç†
   - æµè§ˆå™¨å†å²é›†æˆ

2. **å¯æŠ˜å é¢æ¿å¸ƒå±€**
   - ResizablePanel ç»„ä»¶
   - æ‹–æ‹½è°ƒæ•´å®½åº¦
   - é¢æ¿æŠ˜å /å±•å¼€

### é˜¶æ®µäºŒ: æ•°æ®å¯¼å‡ºä¸æ ‡ç­¾ âœ“

**ä»»åŠ¡åˆ—è¡¨**:
1. **ä¼šè¯å¯¼å‡ºåŠŸèƒ½**
   - ExportDialog ç»„ä»¶
   - Markdown/JSON/HTML æ ¼å¼
   - SessionDetail é›†æˆ

2. **æ ‡ç­¾ç³»ç»Ÿ**
   - useSessionTags hook
   - TagSelector ç»„ä»¶
   - æŒ‰æ ‡ç­¾ç­›é€‰

3. **æ™ºèƒ½ç­›é€‰æ **
   - SmartFilterBar ç»„ä»¶
   - ä¿å­˜/åŠ è½½ç­›é€‰æ¡ä»¶

### é˜¶æ®µä¸‰: å…¨å±€äº¤äº’å¢å¼º âœ“

**ä»»åŠ¡åˆ—è¡¨**:
1. **å…¨å±€å‘½ä»¤é¢æ¿ (Cmd+K)**
   - CommandPalette ç»„ä»¶
   - 31+ ä¸ªå‘½ä»¤
   - é”®ç›˜å¯¼èˆª

2. **æ‰¹é‡æ“ä½œ**
   - SessionList å¤šé€‰
   - BatchActionBar ç»„ä»¶
   - æ‰¹é‡åˆ é™¤/å¯¼å‡º

### é˜¶æ®µå››: å¯è§†åŒ–ä»ªè¡¨ç›˜ âœ“

**ä»»åŠ¡åˆ—è¡¨**:
1. **ä¼šè¯æ´»è·ƒåº¦çƒ­åŠ›å›¾**
   - ActivityHeatmap ç»„ä»¶
   - 90å¤©æ´»åŠ¨æ•°æ®
   - 5çº§é¢œè‰²æ·±åº¦

2. **é¡¹ç›®æ´»è·ƒåº¦è¶‹åŠ¿å›¾**
   - TrendChart ç»„ä»¶
   - 14å¤©æŠ˜çº¿å›¾
   - SVG å®ç°

3. **å®æ—¶æ´»åŠ¨æµ**
   - ActivityTimeline ç»„ä»¶
   - æ··åˆ Session + Team æ´»åŠ¨
   - æŒ‰æ—¶é—´åˆ†ç»„

4. **ä½¿ç”¨ç»Ÿè®¡ä¸åˆ†æ**
   - Dashboard æ‰©å±•
   - statsService æœåŠ¡
   - ä»£ç äº§å‡ºç»Ÿè®¡

### é˜¶æ®µäº”: é«˜çº§åŠŸèƒ½ âœ“

**ä»»åŠ¡åˆ—è¡¨**:
1. **å¢å¼ºæœç´¢**
   - searchService æœåŠ¡
   - å…¨æ–‡æœç´¢ API
   - æœç´¢ç»“æœé¡µé¢

2. **ä»£ç äº§å‡ºç»Ÿè®¡**
   - codeStatsService æœåŠ¡
   - ä»£ç å—è§£æ
   - è¯­è¨€åˆ†å¸ƒç»Ÿè®¡

---

## Agent Teams ä»»åŠ¡åˆ†é…

### èœ‚ç¾¤å›¢é˜Ÿç»“æ„

```
claude-viewer-swarm/
â”œâ”€â”€ frontend-alpha      # å‰ç«¯åŸºç¡€è®¾æ–½ + å…¨å±€äº¤äº’
â”œâ”€â”€ frontend-beta       # å‰ç«¯å¯è§†åŒ– + ä»ªè¡¨ç›˜
â”œâ”€â”€ backend-alpha       # åç«¯ API + ç»Ÿè®¡æœåŠ¡
â”œâ”€â”€ backend-beta        # åç«¯æœç´¢ + ä»£ç ç»Ÿè®¡
â””â”€â”€ qa-tester          # æµ‹è¯•éªŒè¯
```

### è¯¦ç»†åˆ†å·¥

#### Frontend Alpha
**èŒè´£**: åŸºç¡€è®¾æ–½ + å…¨å±€äº¤äº’

**ä»»åŠ¡**:
- useUrlState.ts (æ·±åº¦é“¾æ¥)
- ResizablePanel.tsx (å¯æŠ˜å é¢æ¿)
- CommandPalette.tsx (Cmd+K)
- BatchActionBar.tsx (æ‰¹é‡æ“ä½œ)

#### Frontend Beta
**èŒè´£**: æ•°æ®å¯¼å‡º + æ ‡ç­¾ + å¯è§†åŒ–

**ä»»åŠ¡**:
- ExportDialog.tsx (å¯¼å‡º)
- useSessionTags.ts + TagSelector.tsx (æ ‡ç­¾)
- SmartFilterBar.tsx (æ™ºèƒ½ç­›é€‰)
- ActivityHeatmap.tsx (çƒ­åŠ›å›¾)
- TrendChart.tsx (è¶‹åŠ¿å›¾)
- ActivityTimeline.tsx (æ—¶é—´çº¿)

#### Backend Alpha
**èŒè´£**: ç»Ÿè®¡ API + æ´»åŠ¨æµ

**ä»»åŠ¡**:
- statsService.ts (æ´»åŠ¨ç»Ÿè®¡)
- activityService.ts (å®æ—¶æ´»åŠ¨)
- /api/stats/* è·¯ç”±
- WebSocket activity:stream äº‹ä»¶

#### Backend Beta
**èŒè´£**: å…¨æ–‡æœç´¢ + ä»£ç ç»Ÿè®¡

**ä»»åŠ¡**:
- searchService.ts (å…¨æ–‡æœç´¢)
- codeStatsService.ts (ä»£ç ç»Ÿè®¡)
- /api/search è·¯ç”±
- /api/stats/code-output è·¯ç”±

---

## UI/UX è®¾è®¡è¦ç‚¹

### 1. ä¸€è‡´çš„è§†è§‰é£æ ¼
- æ·±è‰²ä¸»é¢˜ (Dark Theme)
- ç»Ÿä¸€ä½¿ç”¨ Tailwind CSS é…è‰²
- ä¿æŒå›¾æ ‡é£æ ¼ä¸€è‡´ (Lucide React)

### 2. é”®ç›˜ä¼˜å…ˆ
- Cmd+K å‘½ä»¤é¢æ¿
- å¿«æ·é”®æ”¯æŒ
- é”®ç›˜å¯¼èˆª

### 3. æ·±åº¦é“¾æ¥
- æ‰€æœ‰è§†å›¾å¯åˆ†äº«
- URL hash è·¯ç”±
- æµè§ˆå™¨å†å²é›†æˆ

### 4. å®æ—¶åé¦ˆ
- WebSocket å®æ—¶æ›´æ–°
- æ“ä½œæˆåŠŸæç¤º
- åŠ è½½çŠ¶æ€æŒ‡ç¤º

### 5. å¯è®¿é—®æ€§
- è¶³å¤Ÿçš„é¢œè‰²å¯¹æ¯”åº¦
- é”®ç›˜å¯è®¿é—®
- å±å¹•é˜…è¯»å™¨æ”¯æŒ

---

## é…ç½®å‚æ•°

```bash
# åç«¯ (ç«¯å£ 13927)
PORT=13927
CLAUDE_DIR=~/.claude
HISTORY_FILE_PATH=~/.claude/history.jsonl
TEAMS_DIR=~/.claude/teams
CORS_ORIGIN=http://localhost:5173

# å‰ç«¯ (ç«¯å£ 5173)
VITE_API_URL=http://localhost:13927
VITE_WS_URL=http://localhost:13927
```

---

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- è™šæ‹Ÿåˆ—è¡¨ (å¤§é‡ Session æ—¶)
- useMemo/useCallback ç¼“å­˜
- æ‡’åŠ è½½éå…³é”®ç»„ä»¶

### åç«¯ä¼˜åŒ–
- å†…å­˜ç¼“å­˜ (æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ£€æŸ¥)
- å¢é‡æ›´æ–° (WebSocket)
- åˆ†é¡µåŠ è½½ (API limit)

### æ–‡ä»¶ç›‘æ§ä¼˜åŒ–
- ç»Ÿä¸€çš„ FileWatcher
- é˜²æŠ–å¤„ç†
- åªç›‘æ§å¿…è¦æ–‡ä»¶

---

## åç»­è¿­ä»£æ–¹å‘

1. **æ•°æ®æŒä¹…åŒ–**: å°†æ ‡ç­¾ã€è‡ªå®šä¹‰åç§°åŒæ­¥åˆ°äº‘ç«¯
2. **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒç¬¬ä¸‰æ–¹æ‰©å±•
3. **ä¸»é¢˜ç³»ç»Ÿ**: æ”¯æŒ Light/Dark ä¸»é¢˜åˆ‡æ¢
4. **ç§»åŠ¨ç«¯é€‚é…**: å“åº”å¼å¸ƒå±€ä¼˜åŒ–
5. **AIåˆ†æ**: æ™ºèƒ½ä¼šè¯æ€»ç»“ã€å…³é”®è¯æå–
6. **å›¢é˜Ÿåä½œ**: å¤šäººå…±äº«æ”¶è—ã€è¯„è®º
7. **é›†æˆæ›´å¤šæ•°æ®æº**: MCP æœåŠ¡å™¨ç›‘æ§ç­‰

---

## Teams æ•°æ®æ¨æ–­æœºåˆ¶

### é—®é¢˜èƒŒæ™¯
Claude Code åˆ›å»ºçš„ Agent Teams é€šå¸¸åªæœ‰ `inboxes` æ•°æ®è€Œæ²¡æœ‰ `config.json` é…ç½®æ–‡ä»¶ï¼Œå¯¼è‡´ Viewer æ— æ³•æ˜¾ç¤ºè¿™äº›å›¢é˜Ÿã€‚

### è§£å†³æ–¹æ¡ˆ
`TeamsService` å®ç°äº†æ™ºèƒ½æ•°æ®æ¨æ–­ï¼š

1. **ä¼˜å…ˆè¯»å– config.json**: å¦‚æœå­˜åœ¨é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨é…ç½®ä¸­çš„å›¢é˜Ÿä¿¡æ¯
2. **è‡ªåŠ¨æ¨æ–­æ¨¡å¼**: å½“é…ç½®æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œä» `inboxes/*.json` æ–‡ä»¶æ¨æ–­ï¼š
   - **æˆå‘˜åˆ—è¡¨**: æ¯ä¸ª inbox æ–‡ä»¶å¯¹åº”ä¸€ä¸ªæˆå‘˜
   - **æ¶ˆæ¯ç»Ÿè®¡**: ç»Ÿè®¡æ¯ä¸ª inbox çš„æ¶ˆæ¯æ•°é‡
   - **æ—¶é—´æˆ³**: æå–æœ€æ—©æ¶ˆæ¯çš„æ—¶é—´ä½œä¸ºå›¢é˜Ÿåˆ›å»ºæ—¶é—´
   - **Agent ç±»å‹**: æ ¹æ®æ¶ˆæ¯å†…å®¹æ¨æ–­ï¼ˆexplore/research â†’ Explore, plan/design â†’ Planï¼‰
   - **å›¢é˜Ÿåç§°**: å°†ç›®å½•å `dsa-dev` è½¬æ¢ä¸º `Dsa Dev`

### æ•°æ®æµç¤ºä¾‹
```
~/.claude/teams/dsa-dev/
â”œâ”€â”€ inboxes/
â”‚   â”œâ”€â”€ team-lead.json      â†’ æˆå‘˜: team-lead
â”‚   â”œâ”€â”€ backend-dev.json    â†’ æˆå‘˜: backend-dev
â”‚   â””â”€â”€ frontend-dev.json   â†’ æˆå‘˜: frontend-dev
â””â”€â”€ (æ—  config.json)

æ¨æ–­ç»“æœ:
- å›¢é˜Ÿåç§°: "Dsa Dev"
- æˆå‘˜æ•°: 3
- æ¶ˆæ¯æ•°: å„ inbox æ¶ˆæ¯æ€»å’Œ
- ç±»å‹: team-lead (å¦‚æœå­˜åœ¨ team-lead æˆå‘˜)
```

---

## é£é™©ä¸ç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æ–¹æ¡ˆ |
|------|------|----------|
| æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆ | ä¸­ | ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é¢‘ç¹è¯»å– |
| çŠ¶æ€ç®¡ç†å¤æ‚åŒ– | ä¸­ | ä¿æŒå•ä¸€æ•°æ®æºï¼Œä½¿ç”¨ä¸å¯å˜æ›´æ–° |
| æµè§ˆå™¨å…¼å®¹æ€§ | ä½ | ä½¿ç”¨æ ‡å‡† Web APIï¼Œé¿å…å®éªŒæ€§åŠŸèƒ½ |
| å†…å­˜æ³„æ¼ | ä¸­ | æ­£ç¡®æ¸…ç† WebSocket è®¢é˜…å’Œå®šæ—¶å™¨ |
| URL hash å†²çª | ä½ | è§„èŒƒåŒ–çš„ hash æ ¼å¼ï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦ |

---

## é‡æ„é‡Œç¨‹ç¢‘ (2026-02-18)

### é˜¶æ®µå…­: æ¨¡å—åŒ–æ¶æ„é‡æ„ âœ“

é‡‡ç”¨**èœ‚ç¾¤å¹¶è¡Œå¼€å‘æ¨¡å¼**å®Œæˆä»¥ä¸‹é‡æ„ï¼š

#### åç«¯æœåŠ¡æ‹†åˆ†

**é—®é¢˜**: `sessionsService.ts` 676 è¡Œå•ä½“æœåŠ¡ï¼ŒèŒè´£æ··æ‚

**è§£å†³æ–¹æ¡ˆ**: æ‹†åˆ†ä¸º 6 ä¸ªç‹¬ç«‹æ¨¡å—

```
services/sessions/
â”œâ”€â”€ PathUtils.ts          # è·¯å¾„å¤„ç†å·¥å…·å‡½æ•° (normalizePath, generateProjectSlug)
â”œâ”€â”€ SessionCache.ts       # ç¼“å­˜ç®¡ç† (get/set/clear/stats)
â”œâ”€â”€ SessionLoader.ts      # ä» history.jsonl åŠ è½½ä¼šè¯
â”œâ”€â”€ ProjectScanner.ts     # æ‰«æé¡¹ç›®ç›®å½•
â”œâ”€â”€ ConversationLoader.ts # åŠ è½½å®Œæ•´å¯¹è¯
â”œâ”€â”€ SessionRepository.ts  # ä¼šè¯ CRUD æ“ä½œ
â””â”€â”€ __tests__/            # 70+ å•å…ƒæµ‹è¯•

sessionsService.ts        # ç²¾ç®€ä¸»æœåŠ¡ï¼ˆç»„åˆæ¨¡å¼ï¼Œå‘åå…¼å®¹ï¼‰
```

**æˆæœ**:
- ä»£ç è¡Œæ•°: 676 è¡Œ â†’ 180 è¡Œï¼ˆä¸»æœåŠ¡ï¼‰
- èŒè´£åˆ†ç¦»ï¼šæ¯ä¸ªæ¨¡å—å•ä¸€èŒè´£
- å¯æµ‹è¯•æ€§ï¼šæ–°å¢ 70+ å•å…ƒæµ‹è¯•
- å‘åå…¼å®¹ï¼šAPI ä¿æŒä¸å˜

#### å‰ç«¯ç»„ä»¶æ‹†åˆ†

**é—®é¢˜**: `SessionDetail.tsx` 1130 è¡Œå¤§ç»„ä»¶

**è§£å†³æ–¹æ¡ˆ**: æå–å­ç»„ä»¶å’Œè‡ªå®šä¹‰ Hooks

```
components/SessionDetail/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ SessionHeader.tsx      # ä¼šè¯å¤´éƒ¨ï¼ˆæ ‡é¢˜ã€é¡¹ç›®åï¼‰
â”‚   â”œâ”€â”€ SessionMeta.tsx        # å…ƒæ•°æ®ï¼ˆIDã€æ—¶é—´ç»Ÿè®¡ï¼‰
â”‚   â”œâ”€â”€ SessionActions.tsx     # æ“ä½œæŒ‰é’®ï¼ˆå¯¼å‡ºã€åˆ é™¤ã€æ”¶è—ï¼‰
â”‚   â”œâ”€â”€ NavigationBar.tsx      # å¯¼èˆªæ ï¼ˆæ»šåŠ¨å¯¼èˆªï¼‰
â”‚   â”œâ”€â”€ SearchBar.tsx          # æœç´¢æ 
â”‚   â”œâ”€â”€ BookmarksList.tsx      # ä¹¦ç­¾åˆ—è¡¨
â”‚   â”œâ”€â”€ ConversationView.tsx   # å¯¹è¯è§†å›¾
â”‚   â””â”€â”€ RawInputsView.tsx      # åŸå§‹è¾“å…¥è§†å›¾
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useBookmarks.ts        # ä¹¦ç­¾çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ useSearch.ts           # æœç´¢åŠŸèƒ½ï¼ˆå…³é”®è¯ã€è¿‡æ»¤ã€é«˜äº®ï¼‰
â”‚   â””â”€â”€ useScrollNavigation.ts # æ»šåŠ¨å¯¼èˆªé€»è¾‘
â””â”€â”€ SessionDetail.tsx          # ç²¾ç®€ä¸»ç»„ä»¶ï¼ˆ~180 è¡Œï¼‰
```

**æˆæœ**:
- ä»£ç è¡Œæ•°: 1130 è¡Œ â†’ 180 è¡Œ
- å­ç»„ä»¶å¤ç”¨ï¼š8 ä¸ªç‹¬ç«‹ç»„ä»¶
- Hooks å¤ç”¨ï¼š3 ä¸ªè‡ªå®šä¹‰ Hooks
- æµ‹è¯•è¦†ç›–ï¼šæ–°å¢ç»„ä»¶å’Œ Hooks æµ‹è¯•

#### æ€§èƒ½ä¼˜åŒ–

**App.tsx ä¼˜åŒ–**:
- 5 ä¸ªç‹¬ç«‹çš„ useEffect â†’ åˆå¹¶ä¸º 1 ä¸ª
- ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
- ä¼˜åŒ–ä¾èµ–æ•°ç»„å‡å°‘é‡æ¸²æŸ“

**æœç´¢æ€§èƒ½ä¼˜åŒ–**:
- useSearch.ts ä½¿ç”¨ useMemo ç¼“å­˜æœç´¢ç»“æœ
- æ·»åŠ  useDeferredValue å»¶è¿Ÿéç´§æ€¥æ›´æ–°

#### æµ‹è¯•å¢å¼º

**åç«¯æµ‹è¯•** (Jest):
- PathUtils, SessionCache, SessionLoader
- ProjectScanner, ConversationLoader, SessionRepository
- æ€»è®¡ 70+ æµ‹è¯•ï¼Œè¦†ç›–ç‡ 80%+

**å‰ç«¯æµ‹è¯•** (Vitest):
- exportUtils.ts, time.ts å·¥å…·å‡½æ•°
- SessionDetail å­ç»„ä»¶å’Œ Hooks
- æ€»è®¡ 73 ä¸ªæµ‹è¯•

**E2E æµ‹è¯•** (Playwright + Chrome DevTools):
- ä¼šè¯åˆ—è¡¨åŠ è½½ï¼ˆ127 ä¸ªä¼šè¯ï¼‰
- ä¼šè¯è¯¦æƒ…æŸ¥çœ‹
- æœç´¢åŠŸèƒ½éªŒè¯
- å¯¼å‡ºæŒ‰é’®å¯ç”¨æ€§
- å¯¼èˆªåŠŸèƒ½éªŒè¯

#### èœ‚ç¾¤å¼€å‘æ¨¡å¼

```
å›¢é˜Ÿ: claude-viewer-dev
â”œâ”€â”€ backend-splitter   # åç«¯æœåŠ¡æ‹†åˆ†
â”œâ”€â”€ frontend-splitter  # å‰ç«¯ç»„ä»¶æ‹†åˆ†
â”œâ”€â”€ test-writer        # å·¥å…·å‡½æ•°æµ‹è¯•
â”œâ”€â”€ perf-optimizer     # æ€§èƒ½ä¼˜åŒ–
â””â”€â”€ e2e-tester         # E2E æµ‹è¯•
```

**å¹¶è¡Œæ‰§è¡Œ**: 5 ä¸ª Agent åŒæ—¶å·¥ä½œï¼Œæ€»è€—æ—¶ < 30 åˆ†é’Ÿ

---

## æ¨¡å—è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£
æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ï¼š
- `SessionCache` åªç®¡ç†ç¼“å­˜ï¼Œä¸å¤„ç†æ–‡ä»¶ I/O
- `SessionLoader` åªåŠ è½½æ•°æ®ï¼Œä¸ç®¡ç†ç¼“å­˜
- `PathUtils` åªå¤„ç†è·¯å¾„ï¼Œä¸å¤„ç†ä¸šåŠ¡é€»è¾‘

### 2. ä¾èµ–æ³¨å…¥
æ¨¡å—é€šè¿‡æ„é€ å‡½æ•°æ¥æ”¶ä¾èµ–ï¼š
```typescript
class SessionLoader {
  constructor(private pathUtils: PathUtils) {}
}
```

### 3. æ¥å£éš”ç¦»
æ¯ä¸ªæ¨¡å—æš´éœ²æœ€å°æ¥å£ï¼š
```typescript
interface ISessionCache {
  get(key: string): CacheEntry | undefined;
  set(key: string, value: CacheEntry): void;
  clear(): void;
}
```

### 4. å¯æµ‹è¯•æ€§
- æ¯ä¸ªæ¨¡å—ç‹¬ç«‹æµ‹è¯•
- Mock å¤–éƒ¨ä¾èµ–
- è¾¹ç•Œæ¡ä»¶å…¨è¦†ç›–
